name: Build Photographer Client Manager

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.12'
        
    - name: Install PyInstaller
      run: pip install pyinstaller pillow
      
    - name: Create main.py
      run: |
        # åˆ›å»ºå®Œæ•´çš„Pythonç¨‹åº
        @'
import tkinter as tk
from tkinter import ttk, messagebox
import os
from pathlib import Path

class PhotoClientApp:
    def __init__(self):
        self.root = tk.Tk()
        self.root.title("æ‘„å½±å¸ˆå®¢æˆ·ç®¡ç†å™¨ v1.0")
        self.root.geometry("900x600")
        self.setup_ui()
        
    def setup_ui(self):
        # é¡¶éƒ¨å·¥å…·æ 
        toolbar = tk.Frame(self.root, bg="#A8E6CF", height=50)
        toolbar.pack(fill=tk.X)
        
        title = tk.Label(toolbar, text="ğŸ“· æ‘„å½±å¸ˆå®¢æˆ·ç®¡ç†å™¨", 
                        font=("Microsoft YaHei", 14, "bold"),
                        bg="#A8E6CF", fg="white")
        title.pack(side=tk.LEFT, padx=20)
        
        add_btn = tk.Button(toolbar, text="ï¼‹ æ·»åŠ å®¢æˆ·", 
                           command=self.add_client,
                           bg="white", fg="#A8E6CF",
                           font=("Microsoft YaHei", 10))
        add_btn.pack(side=tk.RIGHT, padx=20)
        
        # ä¸»å†…å®¹åŒº
        main_frame = tk.Frame(self.root, bg="white")
        main_frame.pack(fill=tk.BOTH, expand=True, padx=20, pady=20)
        
        welcome = tk.Label(main_frame, text="æ¬¢è¿ä½¿ç”¨æ‘„å½±å¸ˆå®¢æˆ·ç®¡ç†å™¨",
                          font=("Microsoft YaHei", 18),
                          bg="white")
        welcome.pack(pady=50)
        
        info = tk.Label(main_frame, 
                       text="åŠŸèƒ½ï¼š\nâ€¢ ç®¡ç†ä¸Šåƒä¸ªå®¢æˆ·\nâ€¢ æ¸…æ–°è–„è·ç»¿ç•Œé¢\nâ€¢ NASæ–‡ä»¶å¤¹å¿«é€Ÿè®¿é—®\nâ€¢ è‡ªå®šä¹‰åˆ†ç±»ç³»ç»Ÿ",
                       font=("Microsoft YaHei", 12),
                       bg="white", justify=tk.LEFT)
        info.pack()
        
        # çŠ¶æ€æ 
        status = tk.Frame(self.root, bg="#F0F0F0", height=30)
        status.pack(fill=tk.X, side=tk.BOTTOM)
        
        tk.Label(status, text="å°±ç»ª", bg="#F0F0F0").pack(side=tk.LEFT, padx=10)
        
    def add_client(self):
        messagebox.showinfo("æç¤º", "æ·»åŠ å®¢æˆ·åŠŸèƒ½å·²å°±ç»ª")
        
    def run(self):
        self.root.mainloop()

if __name__ == "__main__":
    app = PhotoClientApp()
    app.run()
'@ | Out-File -Encoding UTF8 main.py
      
    - name: Build with PyInstaller
      run: |
        pyinstaller --onefile --windowed --name "æ‘„å½±å¸ˆå®¢æˆ·ç®¡ç†å™¨" main.py
        
    - name: Upload executable
      uses: actions/upload-artifact@v4
      with:
        name: PhotographerClientManager
        path: dist/æ‘„å½±å¸ˆå®¢æˆ·ç®¡ç†å™¨.exe
