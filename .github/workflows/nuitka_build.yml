name: Build GUI App

on: workflow_dispatch

jobs:
  build:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v5
      with:
        python-version: '3.12'
    
    - run: pip install pyinstaller
    
    - name: Create GUI Program
      run: |
        set-content -path main.py -value @"
import tkinter as tk
from tkinter import messagebox

def main():
    root = tk.Tk()
    root.title('摄影师客户管理器')
    root.geometry('800x500')
    
    label = tk.Label(root, text='软件已准备就绪！', font=('微软雅黑', 16))
    label.pack(pady=50)
    
    btn = tk.Button(root, text='添加客户', command=lambda: messagebox.showinfo('提示', '功能正常'))
    btn.pack()
    
    root.mainloop()

if __name__ == '__main__':
    main()
"@
    
    - run: pyinstaller --onefile --windowed --name PhotographerManager main.py
    
    - uses: actions/upload-artifact@v4
      with:
        name: PhotographerManager
        path: dist/PhotographerManager.exe
